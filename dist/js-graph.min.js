(function e(t,r){if(typeof exports==="object"&&typeof module==="object")module.exports=r();else if(typeof define==="function"&&define.amd)define(r);else if(typeof exports==="object")exports["JsGraph"]=r();else t["JsGraph"]=r()})(this,function(){return function(e){var t={};function r(s){if(t[s])return t[s].exports;var i=t[s]={exports:{},id:s,loaded:false};e[s].call(i.exports,i,i.exports,r);i.loaded=true;return i.exports}r.m=e;r.c=t;r.p="";return r(0)}([function(e,t,r){"use strict";var s=function(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true})};var i=function(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)e.__proto__=t};var n=function(){function e(e,t){for(var r in t){var s=t[r];s.configurable=true;if(s.value)s.writable=true}Object.defineProperties(e,t)}return function(t,r,s){if(r)e(t.prototype,r);if(s)e(t,s);return t}}();var a=function(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}};var o=function(){function e(){a(this,e);this._callbacks=[]}n(e,{add:{value:function t(e){var t=this;if(this._callbacks.indexOf(e)===-1){this._callbacks.push(e)}return function(){var r=t._callbacks.indexOf(e);if(r!==-1){t._callbacks.splice(r,1)}}}},fire:{value:function r(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++){t[r]=arguments[r]}this._callbacks.forEach(function(e){e.apply(undefined,t)})}}});return e}();var h=function(){function e(){a(this,e);this._vertices={};this._edges={};this._reverseEdges={};this._vertexCount=0;this._edgeCount=0;this._addVertexCallbacks=new o;this._removeVertexCallbacks=new o;this._addEdgeCallbacks=new o;this._removeEdgeCallbacks=new o}n(e,{onAddVertex:{value:function t(e){return this._addVertexCallbacks.add(e)}},onRemoveVertex:{value:function r(e){return this._removeVertexCallbacks.add(e)}},addNewVertex:{value:function s(t,r){if(this.hasVertex(t)){throw new e.VertexExistsError(t,this._vertices[t])}this._vertices[t]=r;this._edges[t]={};this._reverseEdges[t]={};this._vertexCount+=1;this._addVertexCallbacks.fire(t,r)}},setVertex:{value:function i(t,r){if(!this.hasVertex(t)){throw new e.VertexNotExistsError(t)}this._vertices[t]=r}},ensureVertex:{value:function h(e,t){if(!this.hasVertex(e)){this.addNewVertex(e,t)}}},addVertex:{value:function u(e,t){if(this.hasVertex(e)){this.setVertex(e,t)}else{this.addNewVertex(e,t)}}},removeExistingVertex:{value:function c(t){if(!this.hasVertex(t)){throw new e.VertexNotExistsError(t)}if(Object.keys(this._edges[t]).length){throw new e.HasConnectedEdgesError(t)}if(Object.keys(this._reverseEdges[t]).length){throw new e.HasConnectedEdgesError(t)}var r=this._vertices[t];delete this._vertices[t];this._vertexCount-=1;this._removeVertexCallbacks.fire(t,r)}},destroyExistingVertex:{value:function f(t){var r=this;if(!this.hasVertex(t)){throw new e.VertexNotExistsError(t)}this.eachVertexFrom(t,function(e){r.removeEdge(t,e)});this.eachVertexTo(t,function(e){r.removeEdge(e,t)});this.removeExistingVertex(t)}},removeVertex:{value:function d(e){if(this.hasVertex(e)){this.removeExistingVertex(e)}}},destroyVertex:{value:function v(e){if(this.hasVertex(e)){this.destroyExistingVertex(e)}}},vertexCount:{value:function l(){return this._vertexCount}},hasVertex:{value:function g(e){return e in this._vertices}},vertexValue:{value:function x(e){return this._vertices[e]}},onAddEdge:{value:function E(e){return this._addEdgeCallbacks.add(e)}},onRemoveEdge:{value:function V(e){return this._removeEdgeCallbacks.add(e)}},addNewEdge:{value:function _(t,r,s){if(this.hasEdge(t,r)){throw new e.EdgeExistsError(t,r,this.edgeValue(t,r))}if(!this.hasVertex(t)){if(this.hasVertex(r)){throw new e.VertexNotExistsError(t)}else{throw new e.VertexNotExistsError(t).v(r)}}else if(!this.hasVertex(r)){throw new e.VertexNotExistsError(r)}this._edges[t][r]=s;this._reverseEdges[r][t]=null;this._edgeCount+=1;this._addEdgeCallbacks.fire(t,r,s)}},createNewEdge:{value:function w(t,r,s){if(this.hasEdge(t,r)){throw new e.EdgeExistsError(t,r,this.edgeValue(t,r))}this.ensureVertex(t);this.ensureVertex(r);this.addNewEdge(t,r,s)}},setEdge:{value:function p(t,r,s){if(!this.hasEdge(t,r)){throw new e.EdgeNotExistsError(t,r)}this._edges[t][r]=s}},spanEdge:{value:function b(t,r,s){if(!this.hasVertex(t)){if(this.hasVertex(r)){throw new e.VertexNotExistsError(t)}else{throw new e.VertexNotExistsError(t).v(r)}}else if(!this.hasVertex(r)){throw new e.VertexNotExistsError(r)}if(!this.hasEdge(t,r)){this.addNewEdge(t,r,s)}}},addEdge:{value:function y(e,t,r){if(this.hasEdge(e,t)){this.setEdge(e,t,r)}else{this.addNewEdge(e,t,r)}}},ensureEdge:{value:function m(e,t,r){if(!this.hasEdge(e,t)){this.createNewEdge(e,t,r)}}},createEdge:{value:function k(e,t,r){if(this.hasEdge(e,t)){this.setEdge(e,t,r)}else{this.createNewEdge(e,t,r)}}},removeExistingEdge:{value:function C(t,r){if(!this.hasEdge(t,r)){throw new e.EdgeNotExistsError(t,r)}var s=this._edges[t][r];delete this._edges[t][r];delete this._reverseEdges[r][t];this._edgeCount-=1;this._removeEdgeCallbacks.fire(t,r,s)}},removeEdge:{value:function N(e,t){if(this.hasEdge(e,t)){this.removeExistingEdge(e,t)}}},edgeCount:{value:function j(){return this._edgeCount}},hasEdge:{value:function O(e,t){return this.hasVertex(e)&&this.hasVertex(t)&&e in this._edges&&t in this._edges[e]}},edgeValue:{value:function T(e,t){return this.hasEdge(e,t)?this._edges[e][t]:undefined}},successors:{value:function M(t){if(!this.hasVertex(t)){throw new e.VertexNotExistsError(t)}return Object.keys(this._edges[t])}},predecessors:{value:function F(t){if(!this.hasVertex(t)){throw new e.VertexNotExistsError(t)}return Object.keys(this._reverseEdges[t])}},eachVertex:{value:function P(e){var t=this;Object.keys(this._vertices).every(function(r){var s=e(r,t._vertices[r]);return s!==false})}},eachVertexFrom:{value:function A(t,r){var s=this;if(!this.hasVertex(t)){throw new e.VertexNotExistsError(t)}Object.keys(this._edges[t]).every(function(e){var i=r(e,s.vertexValue(e),s.edgeValue(t,e));return i!==false})}},eachVertexTo:{value:function H(t,r){var s=this;if(!this.hasVertex(t)){throw new e.VertexNotExistsError(t)}Object.keys(this._reverseEdges[t]).every(function(e){var i=r(e,s.vertexValue(e),s.edgeValue(e,t));return i!==false})}},eachEdge:{value:function R(e){var t=this;Object.keys(this._edges).every(function(r){return Object.keys(t._edges[r]).every(function(s){var i=e(r,s,t._edges[r][s]);return i!==false})})}},topologically:{value:function G(t){var r=this;var s=[];var i={};var n=function(a){s.push(a);var o=s.indexOf(a);if(o!==s.length-1){var h=s.slice(o+1).reverse();throw new e.CycleError(h)}if(!i[a]){r.eachVertexTo(a,n);i[a]={returned:t(a,r.vertexValue(a))}}s.pop()};this.eachVertex(function(e){if(!i[e]){n(e)}})}},clearEdges:{value:function J(){var e=this;this.eachEdge(function(t,r){e.removeEdge(t,r)})}},clear:{value:function S(){var e=this;this.eachVertex(function(t){e.destroyVertex(t)})}},hasCycle:{value:function q(){var e=this;var t={};var r={};var s=false;var i=function(n){if(t[n]){s=true;return}if(r[n]){return}r[n]=true;t[n]=true;e.eachVertexFrom(n,function(e){i(e);if(s){return false}});t[n]=false};this.eachVertex(function(e){i(e);if(s){return false}});return s}},hasPath:{value:function z(e,t){var r=this;if(!this.hasVertex(e)||!this.hasVertex(t)){return false}var s={};var i=function(e){if(r.hasEdge(e,t)){return true}s[e]=true;var n=false;r.eachVertexFrom(e,function(e){if(!n&&!s[e]&&i(e)){n=true}});delete s[e];return n};return i(e)}},clone:{value:function B(){var t=new e;this.eachVertex(function(e,r){t.addVertex(e,r)});this.eachEdge(function(e,r,s){t.addEdge(e,r,s)});return t}},transitiveReduction:{value:function D(){var e=this.clone();e.eachVertex(function(t){e.eachVertex(function(r){if(e.hasEdge(t,r)){e.eachVertex(function(s){if(e.hasPath(r,s)){e.removeEdge(t,s)}})}})});return e}}});return e}();e.exports=h;h.VertexExistsError=function(e){function t(e,r){a(this,t);this.vertices={};this.v(e,r)}i(t,e);n(t,{v:{value:function r(e,t){this.vertices[e]=t;this._refreshMessage();return this}},_refreshMessage:{value:function s(){var e=this.vertices===1?"a vertex":"vertices";this.message="This graph has "+e+" '"+Object.keys(this.vertices).join("', '")+"'"}}});return t}(Error);h.VertexNotExistsError=function(e){function t(e){a(this,t);this.vertices={};this.v(e)}i(t,e);n(t,{v:{value:function r(e){this.vertices[e]=undefined;this._refreshMessage();return this}},_refreshMessage:{value:function s(){var e=this.vertices===1?"a vertex":"vertices";this.message="This graph does not have "+e+" '"+Object.keys(this.vertices).join("', '")+"'"}}});return t}(Error);h.EdgeExistsError=function(e){function t(e,r,s){a(this,t);this.edges={};this.e(e,r,s)}i(t,e);n(t,{e:{value:function r(e,t,i){this.edges[e]=s({},t,i);this._refreshMessage();return this}},_refreshMessage:{value:function o(){var e=this;var t=[];Object.keys(this.edges).forEach(function(r){Object.keys(e.edges[r]).forEach(function(e){t.push("('"+r+"', '"+e+"')")})});var r=t.length===1?"an edge":"edges";this.message="This graph has "+r+" "+t.join(", ")}}});return t}(Error);h.EdgeNotExistsError=function(e){function t(e,r){a(this,t);this.edges={};this.e(e,r)}i(t,e);n(t,{e:{value:function r(e,t){this.edges[e]=s({},t,undefined);this._refreshMessage();return this}},_refreshMessage:{value:function o(){var e=this;var t=[];Object.keys(this.edges).forEach(function(r){Object.keys(e.edges[r]).forEach(function(e){t.push("('"+r+"', '"+e+"')")})});var r=t.length===1?"an edge":"edges";this.message="This graph does not have "+r+" "+t.join(", ")}}});return t}(Error);h.HasConnectedEdgesError=function(e){function t(e){a(this,t);this.message="The '"+e+"' vertex has connected edges";this.key=e}i(t,e);return t}(Error);h.CycleError=function(e){function t(e){a(this,t);this.message="This graph contains a cycle: "+e;this.cycle=e}i(t,e);return t}(Error)}])});
//# sourceMappingURL=dist/js-graph.min.js.map